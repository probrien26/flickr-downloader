function AppLoader(apps_container,devs_container,button){var self=this;this.apps_container=apps_container,this.devs_container=devs_container,this.button=button,this._start_loading=function(){self.button.style.display="none",self.loading_img.style.display="inline"},this._stop_loading=function(){self.loading_img.style.display="none",self.button.style.display="inline"},this.flickr_applications_getRandomApproved_onLoad=function(success,responseXML,responseText){if(self._stop_loading(),success){var apps_fragment=responseXML.documentElement.getElementsByTagName("apps_fragment")[0],owners_fragment=responseXML.documentElement.getElementsByTagName("owners_fragment")[0];self.apps_container.innerHTML=apps_fragment.getAttribute("body"),self.devs_container.innerHTML=owners_fragment.getAttribute("body")}},this.load_more=function(){self._start_loading(),F.API.callMethod("flickr.applications.getRandomApproved",{},self,void 0,void 0,void 0,void 0)},this.init=function(){var loading_img=document.createElement("img");loading_img.src="/images/pulser2.gif",loading_img.style.display="none",loading_img.style.marginTop="5px",self.loading_img=loading_img,Y.D.insertAfter(self.loading_img,self.button),Y.E.on(self.button,"click",self.load_more)},this.init()}function FeaturedLoader(container,prev){var self=this;this.container=container,this.prev=prev,self._start_thinking=function(){self.title.innerHTML=self.title_text+'<span class="tt-slash"> / </span>'+F.output.get("thinking")},self._stop_thinking=function(){self.title.innerHTML=self.title_text},this.reload=function(e){self._start_thinking();var params={};self.prev&&(params.previous=self.prev),F.API.callMethod("flickr.applications.getFeatured",params,self,void 0,void 0,void 0,void 0),Y.U.Event.stopEvent(e)},this.flickr_applications_getFeatured_onLoad=function(success,responseXML,responseText){if(self._stop_thinking(),success){var fragment=responseXML.documentElement.getElementsByTagName("fragment")[0],app=responseXML.documentElement.getElementsByTagName("app")[0];app&&(self.prev=app.getAttribute("id")),self.body.innerHTML=fragment.getAttribute("body")}},this.init=function(){var children=Y.D.getChildren(self.container);self.title=children[0],self.title_text=self.title.innerHTML,self.button=children[1],self.body=children[2],Y.E.on(self.button,"click",self.reload)},this.init()}var the_developers_scroller=null,the_app_loader=null,the_featured_loader=null,the_app=null;Y.E.onDOMReady(function(){var apps_container=_ge("app-grid"),devs_container=_ge("app-developers"),button=_ge("more-apps-button");the_app_loader=new AppLoader(apps_container,devs_container,button);var featured_container=_ge("apps-weve-noticed");the_featured_loader=new FeaturedLoader(featured_container,global_prev_app)});